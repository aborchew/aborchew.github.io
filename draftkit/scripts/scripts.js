"use strict";angular.module("draftKitApp",["ngResource","ngSanitize","ngRoute","angucomplete-alt","ui.sortable","ui.bootstrap","firebase"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",resolve:{rankings:["$q","$http",function(a,b){var c=a.defer();return b.get("scripts/json/rankings.json").success(function(a){c.resolve(a)}),c.promise}]}}).otherwise({redirectTo:"/"})}]),angular.module("draftKitApp").controller("MainCtrl",["$rootScope","$scope","$timeout","$filter","$firebase","rankings",function(a,b,c,d,e,f){var g=new Firebase("https://draftkit.firebaseio.com/"),h=e(g);b.fbData=h.$asObject(),console.log(b.fbData),b.setup={rounds:15,teams:12,snaking:!0,roster:{QB:1,WR:2,RB:2,TE:1,Flex:1,DST:1,K:1,BNCH:5},flexEligibility:["WR","RB","TE"]},b.rankings=f,b.drafted=[],b.rounds=[],b.teams=[],b.consumableRoster=[],b.comparator="aveRank",b.reverse=!1,b.playerListExpanded=!1;for(var i=0;i<b.setup.rounds;i++){var j={0:null,1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null,10:null,11:null};b.rounds.push(j)}for(var i=0;i<b.setup.teams;i++){var k={name:"Player "+(i+1),id:i};b.teams.push(k)}b.draft=function(){var a=this.player;angular.forEach(b.rankings,function(d,e){return angular.equals(a,d)?(b.drafted.push(b.rankings.splice(e,1)[0]),void c(function(){var a=b.drafted[b.drafted.length-1].draftPosition%b.setup.teams;b.setup.snaking&&b.getRound(d.draftPosition)%2==0&&(a=b.setup.teams-a-1),b.drafted[b.drafted.length-1].fantasyTeam=a},0)):void 0})},b.undraft=function(){var a=this.player;angular.forEach(b.drafted,function(c,d){angular.equals(a,c)&&b.rankings.push(b.drafted.splice(d,1)[0])})},b.getRound=function(a){return a%b.setup.teams!=0?Math.ceil(a/b.setup.teams):Math.ceil(a/b.setup.teams)+1},b.favorite=function(){this.player.favorite=!this.player.favorite},a.getFantasyTeam=function(){return d("filter")(b.teams,{id:this.player.fantasyTeam})[0]},b.getRoster=function(a){var c=this.team.id,e=d("filter")(b.drafted,function(b){return a?b.fantasyTeam===c&&b.position===a:b.fantasyTeam===c});return e},b.$watch(function(){return b.drafted},function(){angular.forEach(b.drafted,function(a,b){a.draftPosition=b})},!0)}]),angular.module("draftKitApp").controller("Col1Ctrl",["$scope",function(a){a.tabs={available:{active:!0},teams:{active:!1,current:"index"},drafted:{active:!1},starred:{active:!1}}}]),angular.module("draftKitApp").controller("Col2Ctrl",["$scope",function(a){a.tabs={available:{active:!1},drafted:{active:!0},teams:{active:!1,current:"index"},starred:{active:!1}}}]),angular.module("draftKitApp").controller("HeaderCtrl",["$scope",function(){}]),angular.module("draftKitApp").controller("TeamviewCtrl",["$scope","$filter",function(a,b){a.getCount=function(a){return new Array(a)};var c=function(c){var d=[];return angular.forEach(a.setup.roster,function(e,f){angular.forEach(c,function(g){if(g.position==f){if(b("filter")(d,{pos:f}).length<e)return void(d[d.length]={pos:f,player:g})}else if("Flex"===f&&e>0&&b("filter")(d,{pos:"Flex"}).length<a.setup.roster.Flex){var h=-1!=a.setup.flexEligibility.indexOf(g.position);h&&angular.forEach(c,function(a){var b=!0;angular.forEach(d,function(c){angular.equals(a,c.player)&&(b=!1)}),b&&(d[d.length]={pos:"Flex",player:a})})}});var g=b("filter")(d,{pos:f}).length;if(e>g&&"BNCH"!==f)for(;e>g;)d[d.length]={pos:f,player:void 0},g+=1}),angular.forEach(c,function(a){var b=!0;angular.forEach(d,function(c){angular.equals(a,c.player)&&(b=!1)}),b&&(d[d.length]={pos:"BNCH",player:a})}),angular.forEach(a.setup.roster,function(a,c){var e=b("filter")(d,{pos:c}).length;if(a>e)for(;a>e;)d[d.length]={pos:c,player:void 0},e+=1}),d};a.$watch(function(){return a.drafted},function(){a.roster=c(a.getRoster())},!0)}]);
