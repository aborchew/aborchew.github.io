"use strict";angular.module("ceSlider",[]),angular.module("ceSlider").controller("MainCtrl",["$scope",function(a){a.testData=[0,1,2,3,4,5,6,7,8,9],a.lowValue=0,a.highValue=9}]),angular.module("ceSlider").directive("ceSlider",["$document",function(a){return{templateUrl:"partials/ceSlider.html",restrict:"E",scope:{model:"=ceModel",modelMax:"=ceModelMax",data:"=ceData",ticks:"@ceTicks",touchingClass:"@ceTouchingClass",draggingClass:"@ceDraggingClass",dragAreaClass:"@ceDragAreaClass",labelClass:"@ceLabelClass",labelMaxClass:"@ceLabelMaxClass",dragHandleClass:"@ceDragHandleClass",dragHandleMaxClass:"@ceDragHandleMaxClass",tickContainerClass:"@ceTickContainerClass",tickClass:"@ceTickClass",touchingClassOutDelay:"@ceTouchingClassOutDelay",draggingClassOutDelay:"@ceDraggingClassOutDelay",dragHandleContent:"@ceDragHandleContent",dragHandleMaxContent:"@ceDragHandleMaxContent",snap:"@ceSnap"},link:function(b,c){function d(){clearTimeout(e),e=setTimeout(function(){for(var a=0,b=i.length;b>a;a++)i[a].triggerHandler("updatePosition")},250)}if(!b.data)throw new Error("Do you even data, bro?");b.touchingClass=b.touchingClass||"touching",b.draggingClass=b.draggingClass||"dragging",b.dragAreaClass=b.dragAreaClass||"drag-area",b.labelClass=b.labelClass||"value-label",b.labelMaxClass=b.labelMaxClass||"value-label-max",b.dragHandleClass=b.dragHandleClass||"drag-handle",b.dragHandleMaxClass=b.dragHandleMaxClass||"drag-handle-max",b.tickContainerClass=b.tickContainerClass||"tick-container",b.tickClass=b.tickClass||"tick",b.touchingClassOutDelay=parseInt(b.touchingClassOutDelay)||0,b.draggingClassOutDelay=parseInt(b.draggingClassOutDelay)||0;var e,f=0,g=!1;if(b.ticks&&parseInt(b.ticks)?(g=!0,f=parseInt(b.ticks)):b.ticks&&b.data&&b.data.length&&(g=!0,f=b.data.length),g)for(var h=0;f>h;h++)c.find("span").append('<div class="'+b.tickClass+'" style="left:'+100/f*h+'%;"></div>');var i=function(){for(var a=[],b=c.children().children(),d=0,e=b.length;e>d;d++)angular.element(b[d]).attr("drag-handle")&&(a[a.length]=angular.element(b[d]));return a}();b.container=angular.element(c.children()[0]),b.handle=i[0],b.minPossible=Math.min.apply(null,b.data),b.modelMax?(b.handleMax=i[1],b.maxPossible=Math.max.apply(null,b.data)):b.handleMax.remove(),a.onresize=d}}}]).directive("dragHandle",["$document","$timeout",function(a,b){return{restrict:"A",scope:{type:"@dragHandle"},link:function(c,d){function e(a){var b=d[0];if(b.currentStyle)var c=b.currentStyle[a];else if(window.getComputedStyle)var c=document.defaultView.getComputedStyle(b,null).getPropertyValue(a);return c}function f(a){return a.touches&&a.touches[0]&&a.touches[0].pageX?a.touches[0].pageX:0}function g(){p=j(d.css("left").replace("%","")),a.triggerHandler("mousedown"),a.triggerHandler("mousemove"),a.triggerHandler("mouseup")}function h(b){b.preventDefault(),d.addClass(c.$parent.touchingClass),o=(b.screenX||b.pageX||f(b))-p,a.on("mousemove",k),a.on("mouseup",l),a.on("touchmove",k),a.on("touchend",l)}function i(a){return a/c.$parent.container[0].clientWidth*100}function j(a){return a*c.$parent.container[0].clientWidth/100}function k(a){d.addClass(c.$parent.draggingClass),clearTimeout(n),n=setTimeout(function(){d.removeClass(c.$parent.draggingClass)},c.$parent.draggingClassOutDelay);var e=(a.screenX||a.pageX||f(a))-o,g=i(e),h=j(c.$parent.handle.css("left").replace("%","")),k=j(c.$parent.handleMax.css("left").replace("%",""));g>=0&&100>=g?("min"==c.type&&k>=e?p=e:"min"==c.type&&e>=k&&(p=k),"max"==c.type&&e>=h?p=e:"max"==c.type&&h>=e&&(p=h)):0>g&&"min"==c.type?p=0:g>100&&"max"==c.type&&(p=j(100)),d.css({left:i(p)+"%"}),b(function(){c.$parent[c.model]=c.$parent.data[Math.floor(c.$parent.data.length*i(p)/100.01)],c.value=c.$parent[c.model]},0)}function l(){clearTimeout(m),m=setTimeout(function(){d.removeClass(c.$parent.touchingClass)},c.$parent.touchingClassOutDelay),clearTimeout(n),n=setTimeout(function(){d.removeClass(c.$parent.draggingClass)},c.$parent.draggingClassOutDelay),a.off("mousemove",k),a.off("mouseup",l),a.off("touchmove",k),a.off("touchend",l)}var m,n,o=0,p=0;"max"==c.type?(d.css({left:"100%"}),b(function(){p=d[0].offsetLeft-parseInt(e("margin-left")),o=p},0),c.model="modelMax"):c.model="model",d.on("updatePosition",g),d.on("mousedown",h),d.on("touchstart",h)}}}]);