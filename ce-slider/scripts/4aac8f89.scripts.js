"use strict";angular.module("ceSlider",[]),angular.module("ceSlider").controller("MainCtrl",["$scope",function(a){a.testData=[0,1,2,3,4,5,6,7,8,9,10],a.lowValue=0,a.highValue=10}]),angular.module("ceSlider").directive("ceSlider",function(){return{templateUrl:"partials/ceSlider.html",restrict:"E",scope:{model:"=ceModel",modelMax:"=ceModelMax",data:"=ceData",type:"@ceSliderType"},link:function(a,b){function c(){clearTimeout(e),e=setTimeout(function(){for(var a=0,b=d.length;b>a;a++)d[a].triggerHandler("updatePosition")},250)}var d=function(){for(var a=[],c=b.children().children(),d=0,e=c.length;e>d;d++)angular.element(c[d]).attr("drag-handle")&&(a[a.length]=angular.element(c[d]));return a}();a.container=angular.element(b.children()[0]),a.handle=d[0],a.minPossible=Math.min.apply(null,a.data),"range"!=a.type?a.handleMax.remove():(a.handleMax=d[1],a.maxPossible=Math.max.apply(null,a.data));var e;window.onresize=c}}}).directive("dragHandle",["$document","$timeout",function(a,b){return{restrict:"A",scope:{type:"@dragHandle"},link:function(c,d){function e(){l=h(d.css("left").replace("%","")),a.triggerHandler("mousedown"),a.triggerHandler("mousemove"),a.triggerHandler("mouseup")}function f(b){b.preventDefault(),k=(b.screenX||b.pageX)-l,a.on("mousemove",i),a.on("mouseup",j),a.on("touchmove",i),a.on("touchend",j)}function g(a){return a/c.$parent.container[0].clientWidth*100}function h(a){return a*c.$parent.container[0].clientWidth/100}function i(a){console.log(a);var e=(a.screenX||a.pageX)-k;if(g(e)>=0&&g(e)<=100){var f=h(c.$parent.handle.css("left").replace("%","")),i=h(c.$parent.handleMax.css("left").replace("%",""));"min"==c.type&&i>=e?l=e:"min"==c.type&&e>=i&&(l=i),"max"==c.type&&e>=f?l=e:"max"==c.type&&f>=e&&(l=f)}else g(e)<0?l=0:g(e)>100&&(l=h(100));d.css({left:g(l)+"%"}),b(function(){c.$parent[c.model]=c.$parent.data[Math.floor(c.$parent.data.length*g(l)/100.01)],c.value=c.$parent[c.model]},0)}function j(){a.off("mousemove",i),a.off("mouseup",j),a.off("touchmove",i),a.off("touchend",j)}var k=0,l=0;"max"==c.type?(d.css({left:"100%"}),l=d[0].offsetLeft,c.model="modelMax"):c.model="model",d.on("updatePosition",e),d.on("mousedown",f),d.on("touchstart",f)}}}]);