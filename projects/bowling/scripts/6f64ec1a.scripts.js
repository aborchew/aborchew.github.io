function Game(){function a(a){return a.reduce(function(a,b){return a+b},0)}return this.frames=[[]],this.new=function(){this.frames=[[]]},this.bowl=function(b){if(this.frames.length<=10){var c=this.frames,d=c.length,e=c[d-1],f=a(e);10>d&&10>=f+b&&e.length<2?e[e.length]=b:10>d&&(10===f||2===e.length)?c[d]=[b]:10===d&&e.length<3&&(10===f&&e.length<2?e[e.length]=b:f>=10&&2===e.length?e[e.length]=b:10>f&&1==e.length&&10>=f+b&&(e[e.length]=b))}},this.score=function(b){var c=this.frames,d=c.length,e=0;(void 0===b||b>=d||0>b)&&(b=d-1);for(var f=0;b>=f;f++){var g=c[f],h=a(g),i=g.length;e+=h,h>=10&&(2==i&&c[f+1]?e+=c[f+1][0]||0:1==i&&c[f+1]&&(e+=c[f+1][0]||0,e+=10==c[f+1][0]&&c[f+2]?c[f+2][0]||0:c[f+1][1]||0))}return e},this.displayFrame=function(b){var c=this.frames[b];if(9!==b&&c)for(var d=0;d<c.length;d++)return 0===d&&10===c[d]?["","X"]:2==c.length&&10===a(c)?[c[0],"/"]:c;else if(9===b&&c){for(var e=[],f=0;f<c.length;f++)e[f]=10===c[f]?"X":c[f],c.length>1&&10===a([c[0],c[1]])&&10!==c[0]&&(e[1]="/");return e}},this}angular.module("bowlingApp",["ngCookies","ngResource","ngSanitize","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("bowlingApp").controller("MainCtrl",["$scope",function(a){a.game=new Game,a.checkPins=function(b){if(1==a.game.frames[a.game.frames.length-1].length){if(a.game.frames[a.game.frames.length-1][0]+b<=10)return!1;if(10!==a.game.frames[a.game.frames.length-1][0])return!0}}}]);